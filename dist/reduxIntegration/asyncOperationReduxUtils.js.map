{"version":3,"sources":["../../src/reduxIntegration/asyncOperationReduxUtils.js"],"names":["createAsyncOperationInitialAction","descriptorId","action","state","descriptors","params","asyncOperationParams","key","asyncOperationKey","type","createAsyncOperationBeginAction","operationStep","ASYNC_OPERATION_STEPS","BEGIN_ASYNC_OPERATION","createAsyncOperationResolveAction","RESOLVE_ASYNC_OPERATION","createAsyncOperationRejectAction","REJECT_ASYNC_OPERATION","getAsyncOperationResolveActionType","getActionForAsyncOperation","operation","extraParams","fetchStatus","dataStatus","message","lastFetchStatusTime","lastDataStatusTime","otherProps","console","warn"],"mappings":";;;;;;;AAEA;;AAIA;;AAIA;;;;;;;;;;AAIA,IAAMA,iCAAiC,GAAG,SAApCA,iCAAoC,CAACC,YAAD,EAAeC,MAAf,EAA0B;AAClE,MAAMC,KAAK,GAAG,iEAAd;;AADkE,8BAK9D,oCAAsBA,KAAK,CAACC,WAA5B,EAAyCH,YAAzC,EAAuDC,MAAvD,CAL8D;AAAA,MAG1CG,MAH0C,yBAGhEC,oBAHgE;AAAA,MAI7CC,GAJ6C,yBAIhEC,iBAJgE;;AAOlE,2BACKN,MADL;AAEEO,IAAAA,IAAI,EAAER,YAFR;AAGEA,IAAAA,YAAY,EAAZA,YAHF;AAIEI,IAAAA,MAAM,EAANA,MAJF;AAKEE,IAAAA,GAAG,EAAHA;AALF;AAOD,CAdD;;;;AAgBA,IAAMG,+BAA+B,GAAG,SAAlCA,+BAAkC,CAACT,YAAD,EAAeC,MAAf,EAA0B;AAChE,2BACKA,MADL;AAEED,IAAAA,YAAY,EAAZA,YAFF;AAGEU,IAAAA,aAAa,EAAEC,iCAAsBC,qBAHvC;AAIEJ,IAAAA,IAAI,wBAAiBR,YAAjB;AAJN;AAMD,CAPD;;;;AASA,IAAMa,iCAAiC,GAAG,SAApCA,iCAAoC,CAACb,YAAD,EAAeC,MAAf,EAA0B;AAClE,2BACKA,MADL;AAEED,IAAAA,YAAY,EAAZA,YAFF;AAGEU,IAAAA,aAAa,EAAEC,iCAAsBG,uBAHvC;AAIEN,IAAAA,IAAI,0BAAmBR,YAAnB;AAJN;AAMD,CAPD;;;;AASA,IAAMe,gCAAgC,GAAG,SAAnCA,gCAAmC,CAACf,YAAD,EAAeC,MAAf,EAA0B;AACjE,2BACKA,MADL;AAEED,IAAAA,YAAY,EAAZA,YAFF;AAGEU,IAAAA,aAAa,EAAEC,iCAAsBK,sBAHvC;AAIER,IAAAA,IAAI,yBAAkBR,YAAlB;AAJN;AAMD,CAPD;;;;AASA,IAAMiB,kCAAkC,GAAG,SAArCA,kCAAqC,CAAAjB,YAAY;AAAA,iCAAqBA,YAArB;AAAA,CAAvD;;;;AAEA,IAAMkB,0BAA0B,GAAG,SAA7BA,0BAA6B,CACjCC,SADiC,EAG9B;AAAA,MADHC,WACG,uEADW,EACX;;AACH;AACA;AAFG,MAIDC,WAJC,GAWCF,SAXD,CAIDE,WAJC;AAAA,MAKDC,UALC,GAWCH,SAXD,CAKDG,UALC;AAAA,MAMDC,OANC,GAWCJ,SAXD,CAMDI,OANC;AAAA,MAODC,mBAPC,GAWCL,SAXD,CAODK,mBAPC;AAAA,MAQDC,kBARC,GAWCN,SAXD,CAQDM,kBARC;AAAA,MASDzB,YATC,GAWCmB,SAXD,CASDnB,YATC;AAAA,MAUE0B,UAVF,4BAWCP,SAXD;;AAaH,MAAI,CAACnB,YAAL,EAAmB;AACjB2B,IAAAA,OAAO,CAACC,IAAR,CAAa,6EAAb,EAA4FT,SAA5F;AACD;;AAED;AACEX,IAAAA,IAAI,EAAER;AADR,KAEK0B,UAFL,EAGKN,WAHL;AAKD,CAzBD","sourcesContent":["// TODO: JSDocify every function\n\nimport {\n  ASYNC_OPERATION_STEPS,\n} from '../constants';\n\nimport {\n  getAsyncOperationInfo,\n} from '../helpers';\n\nimport {\n  getAsyncOperationsManagerState,\n} from '../asyncOperationManagerUtils';\n\nconst createAsyncOperationInitialAction = (descriptorId, action) => {\n  const state = getAsyncOperationsManagerState();\n  const {\n    asyncOperationParams: params,\n    asyncOperationKey: key,\n  } = getAsyncOperationInfo(state.descriptors, descriptorId, action);\n\n  return {\n    ...action,\n    type: descriptorId,\n    descriptorId,\n    params,\n    key,\n  };\n};\n\nconst createAsyncOperationBeginAction = (descriptorId, action) => {\n  return {\n    ...action,\n    descriptorId,\n    operationStep: ASYNC_OPERATION_STEPS.BEGIN_ASYNC_OPERATION,\n    type: `AOM//BEGIN__${descriptorId}`,\n  };\n};\n\nconst createAsyncOperationResolveAction = (descriptorId, action) => {\n  return {\n    ...action,\n    descriptorId,\n    operationStep: ASYNC_OPERATION_STEPS.RESOLVE_ASYNC_OPERATION,\n    type: `AOM//RESOLVE__${descriptorId}`,\n  };\n};\n\nconst createAsyncOperationRejectAction = (descriptorId, action) => {\n  return {\n    ...action,\n    descriptorId,\n    operationStep: ASYNC_OPERATION_STEPS.REJECT_ASYNC_OPERATION,\n    type: `AOM//REJECT__${descriptorId}`,\n  };\n};\n\nconst getAsyncOperationResolveActionType = descriptorId => `AOM//RESOLVE__${descriptorId}`;\n\nconst getActionForAsyncOperation = (\n  operation,\n  extraParams = {},\n) => {\n  // We're going to pull out all the fields we recognize -- for both Read and Write operations --\n  // and anything left over is assumed to be part of the action (i.e., any necessary IDs or params)\n  const {\n    fetchStatus,\n    dataStatus,\n    message,\n    lastFetchStatusTime,\n    lastDataStatusTime,\n    descriptorId,\n    ...otherProps\n  } = operation;\n\n  if (!descriptorId) {\n    console.warn('AsyncOperation needs to include descriptorId so that we can re-dispatch it.', operation);\n  }\n\n  return {\n    type: descriptorId,\n    ...otherProps,\n    ...extraParams,\n  };\n};\n\nexport {\n  createAsyncOperationInitialAction,\n  createAsyncOperationBeginAction,\n  createAsyncOperationResolveAction,\n  createAsyncOperationRejectAction,\n  getAsyncOperationResolveActionType,\n  getActionForAsyncOperation,\n};\n"],"file":"asyncOperationReduxUtils.js"}